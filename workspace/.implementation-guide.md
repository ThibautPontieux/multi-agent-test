# üîß Guide d'Impl√©mentation des Outils MCP d'Organisation

## üéØ Pour le Developer Agent

### üìã Checklist d'Impl√©mentation

#### Phase 1: Localisation et Analyse
- [ ] **Trouver le serveur MCP** dans le workspace ou le repo GitHub
- [ ] **Analyser la structure** des outils existants (create_task, write_file, etc.)
- [ ] **Identifier les patterns** d'impl√©mentation des outils MCP
- [ ] **V√©rifier les d√©pendances** (TypeScript, Node.js, @modelcontextprotocol/sdk)

#### Phase 2: Impl√©mentation des Outils Core
- [ ] **create_project_structure** - Priorit√© 1 (structure de base)
- [ ] **validate_project_structure** - Priorit√© 2 (validation)
- [ ] **get_organization_recommendations** - Priorit√© 3 (suggestions)

#### Phase 3: Outils Avanc√©s  
- [ ] **auto_organize_project** - Auto-r√©organisation
- [ ] **generate_workspace_health_report** - Monitoring

#### Phase 4: Tests et Documentation
- [ ] **Tester chaque outil** individuellement
- [ ] **Tester l'int√©gration** avec les agents existants
- [ ] **Documenter** les nouveaux outils dans le README

## üèóÔ∏è Architecture Sugg√©r√©e

### Structure du Serveur MCP
```
mcp-server/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ index.ts                 # Point d'entr√©e
‚îÇ   ‚îú‚îÄ‚îÄ tools/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ existing-tools.ts    # Outils actuels
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ workspace-manager.ts # NOUVEAUX OUTILS
‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ file-operations.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ validation.ts        # NOUVELLES FONCTIONS
‚îÇ   ‚îî‚îÄ‚îÄ types/
‚îÇ       ‚îî‚îÄ‚îÄ workspace.ts         # NOUVEAUX TYPES
‚îú‚îÄ‚îÄ package.json
‚îî‚îÄ‚îÄ tsconfig.json
```

### Integration Pattern
```typescript
// Dans index.ts
import { workspaceManagerTools } from './tools/workspace-manager.js';

// Ajouter aux outils existants
const allTools = [
  ...existingTools,
  ...workspaceManagerTools
];

server.setRequestHandler(ListToolsRequestSchema, async () => ({
  tools: allTools.map(tool => ({
    name: tool.name,
    description: tool.description,
    inputSchema: tool.inputSchema
  }))
}));
```

## üîç Si le Serveur MCP n'Existe Pas

### Cr√©er un Nouveau Serveur MCP
```bash
# 1. Initialiser le projet
mkdir mcp-workspace-server
cd mcp-workspace-server
npm init -y

# 2. Installer les d√©pendances
npm install @modelcontextprotocol/sdk
npm install -D typescript @types/node

# 3. Cr√©er la structure
mkdir -p src/tools src/utils src/types
```

### Template de Base
```typescript
// src/index.ts
import { Server } from '@modelcontextprotocol/sdk/server/index.js';
import { StdioServerTransport } from '@modelcontextprotocol/sdk/server/stdio.js';
import { workspaceManagerTools } from './tools/workspace-manager.js';

const server = new Server({
  name: 'workspace-organization-server',
  version: '1.0.0',
}, {
  capabilities: {
    tools: {}
  }
});

// Enregistrer tous les outils
server.setRequestHandler(ListToolsRequestSchema, async () => ({
  tools: workspaceManagerTools.map(tool => ({
    name: tool.name, 
    description: tool.description,
    inputSchema: tool.inputSchema
  }))
}));

// D√©marrer le serveur
const transport = new StdioServerTransport();
await server.connect(transport);
```

## üí° Conseils d'Impl√©mentation

### ‚úÖ **Best Practices**
- **Commencer simple** : Impl√©menter create_project_structure d'abord
- **Tester incrementalement** : Un outil √† la fois  
- **Logger extensivement** : console.log pour debugging
- **G√©rer les erreurs** : try/catch partout

### ‚ö†Ô∏è **Pi√®ges √† √âviter**
- **Paths Windows/Linux** : Utiliser path.join() syst√©matiquement
- **Permissions fichiers** : V√©rifier l'acc√®s avant √©criture
- **Async/await** : Ne pas oublier les await sur fs operations
- **JSON parsing** : G√©rer les fichiers corrompus

### üîß **Code Utilitaire Sugg√©r√©**
```typescript
// utils/file-operations.ts
import fs from 'fs/promises';
import path from 'path';

export async function ensureDirectory(dirPath: string): Promise<void> {
  try {
    await fs.mkdir(dirPath, { recursive: true });
  } catch (error: any) {
    if (error.code !== 'EEXIST') throw error;
  }
}

export async function writeJsonFile(filePath: string, data: any): Promise<void> {
  await ensureDirectory(path.dirname(filePath));
  await fs.writeFile(filePath, JSON.stringify(data, null, 2), 'utf8');
}
```

## üéØ Ordre d'Impl√©mentation Recommand√©

### 1Ô∏è‚É£ **create_project_structure** (Priorit√© Maximale)
- Cr√©e la structure de dossiers de base
- Template React-app simple
- Test: Cr√©er un projet "test-organization"

### 2Ô∏è‚É£ **validate_project_structure** 
- V√©rifie qu'un projet suit les conventions
- Score de 0-100
- Test: Valider le projet cr√©√© √† l'√©tape 1

### 3Ô∏è‚É£ **get_organization_recommendations**
- Analyse et sugg√®re des am√©liorations
- Liste priorit√©e de recommandations  
- Test: Analyser le workspace actuel

### 4Ô∏è‚É£ **auto_organize_project** 
- R√©organise automatiquement
- Mode dry-run par d√©faut
- Test: R√©organiser un projet d√©sorganis√©

### 5Ô∏è‚É£ **generate_workspace_health_report**
- Rapport global sur tous les projets
- M√©triques et tendances
- Test: Rapport sur le workspace complet

## üöÄ Apr√®s l'Impl√©mentation

Une fois les outils impl√©ment√©s et test√©s :

1. **Red√©marrer Claude Desktop** pour charger les nouveaux outils
2. **Tester avec l'orchestrator** : `create_project_structure`
3. **Valider avec QA** : Tests des nouveaux outils  
4. **D√©ployer progressivement** : Un outil √† la fois en production

**Bon d√©veloppement ! üîß‚ú®**